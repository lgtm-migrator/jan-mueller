import{d as W,t as S,r as C,o as z,a as F,w as b,b as i,c as f,F as $,e as M,n as x,u as h,f as N,g as T,h as V,i as R,j,k as A,l as E,m as O}from"./chunks/runtime-core.esm-bundler.bca98b6b.js";import{_ as D}from"./chunks/_plugin-vue_export-helper.1e5d64a6.js";const L=["data-index"],U=W({__name:"masonry-wall",props:{columnWidth:{default:400},items:null,gap:{default:0},rtl:{type:Boolean,default:!1},ssrColumns:{default:0}},emits:["redraw","redrawSkip"],setup(t,{emit:u}){const g=t,{columnWidth:w,items:s,gap:l,rtl:p,ssrColumns:c}=S(g),a=C([]),d=C();function _(){const e=Math.floor((d.value.getBoundingClientRect().width+l.value)/(w.value+l.value));return e>0?e:1}function k(e){return[...new Array(e)].map(()=>[])}if(c.value>0){const e=k(c.value);s.value.forEach((o,r)=>e[r%c.value].push(r)),a.value=e}async function B(e){if(e>=s.value.length)return;await T();const o=[...d.value.children];p.value&&o.reverse();const r=o.reduce((m,n)=>n.getBoundingClientRect().height<m.getBoundingClientRect().height?n:m);a.value[+r.dataset.index].push(e),await B(e+1)}async function v(e=!1){if(a.value.length===_()&&!e){u("redrawSkip");return}a.value=k(_());const o=window.scrollY;await B(0),window.scrollTo({top:o}),u("redraw")}const y=typeof ResizeObserver>"u"?void 0:new ResizeObserver(()=>v());return z(()=>{v(),y?.observe(d.value)}),F(()=>y?.unobserve(d.value)),b([s,p],()=>v(!0)),b([w,l],()=>v()),(e,o)=>(i(),f("div",{ref_key:"wall",ref:d,class:"masonry-wall",style:x({display:"flex",gap:`${h(l)}px`})},[(i(!0),f($,null,M(a.value,(r,m)=>(i(),f("div",{key:m,class:"masonry-column","data-index":m,style:x({display:"flex","flex-basis":"0px","flex-direction":"column","flex-grow":1,height:["-webkit-max-content","-moz-max-content","max-content"],gap:`${h(l)}px`})},[(i(!0),f($,null,M(r,n=>(i(),f("div",{key:n,class:"masonry-item"},[N(e.$slots,"default",{item:h(s)[n],index:n},()=>[V(R(h(s)[n]),1)])]))),128))],12,L))),128))],4))}}),Y=(()=>{const t=U;return t.install=u=>{u.component("MasonryWall",t)},t})(),q=W({components:{MasonryWall:Y},data(){return{items:[50,75,75,100,50,50,75,150,125,175,50,100,125]}}});function G(t,u,g,w,s,l){const p=E("MasonryWall");return i(),j(p,{items:t.items,"ssr-columns":1,"column-width":100,gap:16},{default:A(({item:c,index:a})=>[O("div",{style:x({height:`${c}px`}),class:"card flex items-center justify-center"},R(a),5)]),_:1},8,["items"])}const J=D(q,[["render",G]]);export{J as default};
